(ns git
  (:require [joker.string :as str]
            [joker.os :as os]))

(defn repo-info
  "Return repo url, owner & name"
  []
  (let [repo-url (-> (os/sh "git" "config" "--get" "remote.origin.url") :out str/trim)]
    (re-matches #".+:(.+)/(.+)\.git" repo-url)))

(defn current-branch [] (-> (os/sh "git" "symbolic-ref" "--short" "HEAD") :out str/trim))
