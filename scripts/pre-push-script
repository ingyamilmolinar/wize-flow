#!/usr/bin/env bash

protected_main_branch='master'
protected_dev_branch='develop'
push_command=$(ps -ocommand= -p $PPID)

#TOFIX: If current branch is same as remote, current branch does not appear in push_command
current_branch=$(git rev-parse --abbrev-ref HEAD)
if [[ ( "$push_command" == *" $protected_main_branch"* || "$push_command" == *" $protected_dev_branch"* ) && $AUTOMATED_PUSH != "true" ]]
then
  echo 'You cannot push directly to develop or master'
  exit 1
else
  exit 0
fi
